<!DOCTYPE html>
<html>
<head>
<title>Trouver une histoire</title>
<link rel='stylesheet' type='text/css' href='../public/style.css'/>@
<script type='application/ecmascript'>
			function showResults() {
				document.getElementById('searchForm').submit();
			}
</script>
<script type='text/ecmascript'>
function click(aGroup) {
			    //var myGroup = document.getElementById('myGroup');
			    var myGroup = aGroup;
			    var translate = myGroup.getAttribute('transform');
			    if(translate == 'translate(200)') {
				    myGroup.setAttribute('transform','translate(0)');
			    }
			    else {
				    myGroup.setAttribute('transform','translate(200)');
			    }
		    }
</script>
</head>

<body>
<%include connexion%>
<div class='structureElement'>
	<div class='structureName'>
		Crit&egrave;res de recherche
	</div>
<form id='searchForm' method='POST' action='/stories/search' enctype='application/x-www-form-urlencoded'>
		<div>Age :
			<select name='age' id='age'>
				<option></option>
				<option>18 - 25</option>
				<option>25 - 30</option>
				<option>30 - 35</option>
				<option>35 - 40</option>
				<option>40 - 45</option>
				<option>45 - 50</option>
				<option>50 - 55</option>
				<option>55 - 60</option>
				<option>60 - ...</option>
			</select>Genre :
			<select name='gender' id='gender'>
				<option></option>
				<option>M</option>
				<option>F</option>
			</select>Statut :
			<select name='hierarchyLevel' id='hierarchyLevel'>
				<option></option>
				<option>Cadre</option>
				<option>Non cadre</option>
			</select>Secteur :
			<select name='activity' id='activity'>
				<option></option>
				<option>Droit</option>
				<option>Banque</option>
				<option>BÃ¢timent</option>
			</select>
			<div id='themes' class='structureElement'>
				<div class='structureName'>Th&egrave;mes</div>
				<svg width='500' height='500'>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="0" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="25" fill='black'>Probl&egrave;me avec mon/ma sup&eacute;rieur(e)</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="50" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="75" fill='black'>Probl&egrave;me avec un coll&egrave;gue</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="100" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="125" fill='black'>Probl&egrave;me avec un subalterne</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="150" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="175" fill='black'>R&eacute;mun&eacute;ration</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="200" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="225" fill='black'>Cong&eacute;s</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="250" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="275" fill='black'>Amour / Sexe</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="300" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="325" fill='black'>Management</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="350" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="375" fill='black'>Nouveau poste</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="400" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="425" fill='black'>Licenciement/reclassement</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="450" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="475" fill='black'>Ambiance</text>
					</g>
					<g id='myGroup' onclick='click(this)'>
					<rect x="0" y="500" rx="20" ry="20" width="300" height="40"
					style="fill:#FFFFFF;stroke:black;stroke-width:1;opacity:0.3"/>
					<text x="20" y="525" fill='black'>Autre</text>
					</g>
				</svg>

			</div>
		</div>Mot clef :
		<input type='text' name='keywords' id='keywords'/>
	</div>
</form>
<button onclick='showResults()'>Envoyer</button>
		</div>
		<%if(stories) {%>
		<div class='structureElement' id='results' style='display:none;'>
<div class='structureName'>
	R&eacute;sultats
</div>
<div>
	<div class='story'>
		<%
		for(var i = 0 ; i < stories.length ; i++) {
		%>
		<div class='storyTitle'>
			<a href="/stories/consult/<%=stories[i].id%>"><%= stories[i].title%></a>
		</div>
		<div class='storyAuthor' style='display:inline;'>R&eacute;dig&eacute; par <%= stories[i].author%></div>
		<div class='storyDate' style='display:inline;'>&agrave; <%= formatDate(stories[i].creationDate)%></div>
		<%
		}
		%>

	</div>
	</div>
	<%}%>

	</body>

	</html>
